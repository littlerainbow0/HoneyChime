<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/assets/css/header_html.css">
    <link rel="stylesheet" href="./src/assets/css/tripInfo.css">
    <link rel="stylesheet" href="./src/assets/css/top_btn.css">
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>

    <title>行程介紹</title>
</head>

<body>
    <header class="tripInfo_hero">
        <nav class="header_nav">
            <div class="header_logo">
                <a href="/" class="logo">
                    <img src="/src/assets/images/icon/LOGO.svg" alt="">
                </a>
                <a href="/login" class="member_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M20 22H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12" />
                    </svg>
                </a>
            </div>
            <ul>
                <li><a href="/">首頁</a></li>
                <li><a href="/about">概念</a></li>
                <li><a href="/menu">饗宴</a></li>
                <li><a href="/facilities">設施</a></li>
                <li><a href="/trip">旅程</a></li>
            </ul>
        </nav>
    </header>
    <!-- 行程頁籤 -->
    <main>
        <div class="itinerary">
            <nav class="top_nav">
                <ul>
                    <li><button onclick="" class="itinerary_btn" id="1">
                            <span>日式甜點<br /></span>
                            台北 ⭢ 台中</button></li>
                    <li><button onclick="" class="itinerary_btn" id="2">
                            <span>日式甜點<br /></span>
                            台北 ⭢ 花蓮</button></li>
                    <li><button onclick="" class="itinerary_btn" id="3">
                            <span>台式甜點<br /></span>
                            台中 ⭢ 台南</button></li>
                    <li><button onclick="" class="itinerary_btn" id="4">
                            <span>台式甜點<br /></span>
                            台中 ⭢ 高雄</button></li>
                    <li><button onclick="" class="itinerary_btn" id="5">
                            <span>歐式甜點<br /></span>
                            高雄 ⭢ 台中</button></li>
                    <li><button onclick="" class="itinerary_btn" id="6">
                            <span>歐式甜點<br /></span>
                            高雄 ⭢ 花蓮</button></li>
                </ul>
            </nav>
        </div>
        <!-- 行程主題 -->
        <div class="trip_title">
            <div>
                <p><span class="dessert_type" id="dessertType"> 日式甜點</span>
                    <span class="sm_font"><span id="stopStart">台北</span> ⭢ <span id="stopEnd">台中</span> </span>
                </p>
                <img id="routeImg" src="/src/assets/images/train_exterior/tripInfo_train01.png" alt="">
            </div>
            <div>
                <p id="description">
                    台北出發，搭乘鐵路前往台中，沿途的景色會讓你驚艷不已。列車穿越繁華的都市後，逐漸進入寧靜的山林與田野。你可以看到壯麗的中央山脈在遠方矗立，隨著列車的前行，山谷與河流交織出一幅幅美麗的畫面。</p>
                <button id="goReservation" onclick="toReservation()">行程預約</button>
            </div>
        </div>
        <!-- 風景介紹 -->
        <div class="view_info">

            <h3>沿途風景
                <span>▼</span>
            </h3>

            <!-- img -->
            <div class="view_info_content">
                <div>
                    <h5>Landscape</h5>
                    <p id="LandscapeDescription">
                        春天的櫻花、夏天的綠意、秋天的紅葉，還是冬天的雲霧，每個季節都有其獨特的風貌。這段旅程不僅是從台北到台中的移動，更是一場視覺與心靈的饗宴，讓你在車窗外的美景中，感受到台灣的自然魅力與文化深度。
                    </p>
                    <img id="landscapeimg1" src="/src/assets/images/train_exterior/tripInfo_MountainSm02.png" alt="">
                </div>
                <div>
                    <img id="landscapeimg2" src="/src/assets/images/train_exterior/tripInfo_MountainLg01.png" alt="">
                    <img id="landscapeimg3" src="/src/assets/images/train_exterior/tripInfo_SeaSm02.png" alt="">
                </div>
            </div>
        </div>

        </div>

        <!-- 餐點介紹 -->
        <div class="dessert_info">

            <h3>餐點介紹
                <span>▼</span>
            </h3>

            <div>
                <div class="dessert_section">
                    <h5 id="mealName1">舒芙蕾佐時令水果</h5>
                    <span
                        id="mealContent1">舒芙蕾：<br>由新鮮的雞蛋和高品質的牛奶製成，外層金黃酥脆，內裡則柔軟綿密。<br>時令水果：<br>我們提供多種配料選擇，包括香滑的鮮奶油、時令水果（如草莓、藍莓）、以及自製的焦糖醬或抹茶醬，讓您根據個人口味自由搭配，增添風味。<br>日式綠茶：<br>精選香醇的日式綠茶，與舒芙蕾相輔相成。</span>
                    <img id="mealImg1" src="/src/assets/images/dessert/dessert_newDessert.jpg" alt="">
                </div>
                <div class="dessert_section">
                    <h5 id="mealName2">日式和菓子佐綠茶羊羹</h5>
                    <span
                        id="mealContent2">日式和菓子：<br>選用當季新鮮食材，製作出色彩繽紛的和菓子，像是細膩的麻糬、香甜的紅豆糕和繽紛的水果羊羹，無論是口感還是外觀都讓人驚喜。<br><br>靜岡抹茶：<br>
                        提供選自日本優質茶園，茶香濃郁，口感清新，完美搭配各式和菓子。</span>
                    <img id="mealImg2" src="/src/assets/images/dessert/tripInfo_Jp02.png" alt="">
                </div>
            </div>
        </div>

    </main>

    <a href="#" class="top">

        Top
    </a>
    <script>

        // --------------- 抓路線與風景圖片 ----------------
        getRouteData =
            [
                {
                    "RouteID": 1,
                    "RouteImagePath": "/src/assets/images/train_exterior/tripInfo_train01.png",
                    "Duration": 121,
                    "Description": "台北出發，搭乘鐵路前往台中，沿途的景色會讓你驚艷不已。列車穿越繁華的都市後，逐漸進入寧靜的山林與田野。你可以看到壯麗的中央山脈在遠方矗立，隨著列車的前行，山谷與河流交織出一幅幅美麗的畫面。",
                    "LandScapeImage1": "/src/assets/images/train_exterior/tripInfo_MountainSm02.png",
                    "LandScapeImage2": "/src/assets/images/train_exterior/tripInfo_MountainLg01.png",
                    "LandScapeImage3": "/src/assets/images/train_exterior/tripInfo_SeaSm02.png",
                    "LandScapeDescription": "春天的櫻花、夏天的綠意、秋天的紅葉，還是冬天的雲霧，每個季節都有其獨特的風貌。這段旅程不僅是從台北到台中的移動，更是一場視覺與心靈的饗宴，讓你在車窗外的美景中，感受到台灣的自然魅力與文化深度。",
                    "StopStartName": "台北",
                    "StopEndName": "台中"
                },
                {
                    "RouteID": 2,
                    "RouteImagePath": "/src/assets/images/train_exterior/Facilities_train.png",
                    "Duration": 150,
                    "Description": "台北出發，搭乘鐵路前往花蓮，沿途的景色會讓你驚艷不已。列車穿越繁華的都市後，逐漸進入寧靜的山林與田野。你可以看到壯麗的中央山脈在遠方矗立，隨著列車的前行，山谷與河流交織出一幅幅美麗的畫面。",
                    "LandScapeImage1": "/src/assets/images/train_exterior/tripInfo_SeaLg02.png",
                    "LandScapeImage2": "/src/assets/images/train_exterior/train_exterior_7.png",
                    "LandScapeImage3": "/src/assets/images/train_exterior/tripInfo_MountainSm04.png",
                    "LandScapeDescription": "春天的櫻花、夏天的綠意、秋天的紅葉，還是冬天的雲霧，每個季節都有其獨特的風貌。這段旅程不僅是從台北到花蓮的移動，更是一場視覺與心靈的饗宴，讓你在車窗外的美景中，感受到台灣的自然魅力與文化深度。",
                    "StopStartName": "台北",
                    "StopEndName": "花蓮"
                },
                {
                    "RouteID": 3,
                    "RouteImagePath": "/src/assets/images/train_exterior/tripInfo_MountainSm03.png",
                    "Duration": 126,
                    "Description": "台中出發，搭乘鐵路前往台南，沿途的景色會讓你驚艷不已。列車穿越繁華的都市後，逐漸進入寧靜的山林與田野。你可以看到壯麗的中央山脈在遠方矗立，隨著列車的前行，山谷與河流交織出一幅幅美麗的畫面。",
                    "LandScapeImage1": "/src/assets/images/train_exterior/tripInfo_MountainSm04.png",
                    "LandScapeImage2": "/src/assets/images/train_exterior/tripInfo_MountainLg02.png",
                    "LandScapeImage3": "/src/assets/images/train_exterior/tripInfo_GrassLg02.png",
                    "LandScapeDescription": "春天的櫻花、夏天的綠意、秋天的紅葉，還是冬天的雲霧，每個季節都有其獨特的風貌。這段旅程不僅是從台中到台南的移動，更是一場視覺與心靈的饗宴，讓你在車窗外的美景中，感受到台灣的自然魅力與文化深度。",
                    "StopStartName": "台中",
                    "StopEndName": "台南"
                },
                {
                    "RouteID": 4,
                    "RouteImagePath": "/src/assets/images/train_exterior/train_exterior_4.png",
                    "Duration": 145,
                    "Description": "台中出發，搭乘鐵路前往高雄，沿途的景色會讓你驚艷不已。列車穿越繁華的都市後，逐漸進入寧靜的山林與田野。你可以看到壯麗的中央山脈在遠方矗立，隨著列車的前行，山谷與河流交織出一幅幅美麗的畫面。",
                    "LandScapeImage1": "/src/assets/images/train_exterior/tripInfo_train01.png",
                    "LandScapeImage2": "/src/assets/images/train_exterior/tripInfo_MountainLg03.png",
                    "LandScapeImage3": "/src/assets/images/train_exterior/tripInfo_GrassLg02.png",
                    "LandScapeDescription": "春天的櫻花、夏天的綠意、秋天的紅葉，還是冬天的雲霧，每個季節都有其獨特的風貌。這段旅程不僅是從台中到高雄的移動，更是一場視覺與心靈的饗宴，讓你在車窗外的美景中，感受到台灣的自然魅力與文化深度。",
                    "StopStartName": "台中",
                    "StopEndName": "高雄"
                },
                {
                    "RouteID": 5,
                    "RouteImagePath": "/src/assets/images/train_exterior/train_exterior_hero.png",
                    "Duration": 154,
                    "Description": "高雄出發，搭乘鐵路前往台中，沿途的景色會讓你驚艷不已。列車穿越繁華的都市後，逐漸進入寧靜的山林與田野。你可以看到壯麗的中央山脈在遠方矗立，隨著列車的前行，山谷與河流交織出一幅幅美麗的畫面。",
                    "LandScapeImage1": "/src/assets/images/train_exterior/tripInfo_GrassLg02.png",
                    "LandScapeImage2": "/src/assets/images/train_exterior/tripInfo_MountainSm01.png",
                    "LandScapeImage3": "/src/assets/images/train_exterior/tripInfo_train01.png",
                    "LandScapeDescription": "春天的櫻花、夏天的綠意、秋天的紅葉，還是冬天的雲霧，每個季節都有其獨特的風貌。這段旅程不僅是從高雄到台中的移動，更是一場視覺與心靈的饗宴，讓你在車窗外的美景中，感受到台灣的自然魅力與文化深度。",
                    "StopStartName": "高雄",
                    "StopEndName": "台中"
                },
                {
                    "RouteID": 6,
                    "RouteImagePath": "/src/assets/images/train_exterior/train_exterior_7.png",
                    "Duration": 240,
                    "Description": "高雄出發，搭乘鐵路前往花蓮，沿途的景色會讓你驚艷不已。列車穿越繁華的都市後，逐漸進入寧靜的山林與田野。你可以看到壯麗的中央山脈在遠方矗立，隨著列車的前行，山谷與河流交織出一幅幅美麗的畫面。",
                    "LandScapeImage1": "/src/assets/images/train_exterior/tripInfo_SeaSm03.png",
                    "LandScapeImage2": "/src/assets/images/train_exterior/tripInfo_MountainLg03.png",
                    "LandScapeImage3": "/src/assets/images/landscape/landscape_landscape04.png",
                    "LandScapeDescription": "春天的櫻花、夏天的綠意、秋天的紅葉，還是冬天的雲霧，每個季節都有其獨特的風貌。這段旅程不僅是從高雄到花蓮的移動，更是一場視覺與心靈的饗宴，讓你在車窗外的美景中，感受到台灣的自然魅力與文化深度。",
                    "StopStartName": "高雄",
                    "StopEndName": "花蓮"
                }
            ];

        getDessertType = [
            { "DessertTypeID": 1, "DessertType": "JP", "DessertTitle": "日式甜點" },
            { "DessertTypeID": 2, "DessertType": "TW", "DessertTitle": "台式甜點" },
            { "DessertTypeID": 3, "DessertType": "EU", "DessertTitle": "歐式甜點" }
        ];
        // ---------- 抓甜點內容 ---------
        const getMeals =
            [
                {
                    MealID: 1,
                    MealName: "舒芙蕾佐時令水果",
                    MealImagePath: "/src/assets/images/dessert/dessert_newDessert.jpg",
                    MealContent: "舒芙蕾, 時令水果, 日本綠茶",
                    MealDescription: " 舒芙蕾：<br>由新鮮的雞蛋和高品質的牛奶製成，外層金黃酥脆，內裡則柔軟綿密。<br>時令水果：<br>我們提供多種配料選擇，包括香滑的鮮奶油、時令水果（如草莓、藍莓）、以及自製的焦糖醬或抹茶醬，讓您根據個人口味自由搭配，增添風味。<br>日式綠茶：<br>精選香醇的日式綠茶，與舒芙蕾相輔相成。"
                },
                {
                    MealID: 2,
                    MealName: "日式和菓子佐綠茶羊羹",
                    MealImagePath: "/src/assets/images/dessert/tripInfo_Jp02.png",
                    MealContent: "日式和菓子, 綠茶羊羹, 靜岡抹茶",
                    MealDescription: "日式和菓子：<br>選用當季新鮮食材，製作出色彩繽紛的和菓子，像是細膩的麻糬、香甜的紅豆糕和繽紛的水果羊羹，無論是口感還是外觀都讓人驚喜。<br><br>靜岡抹茶：<br> 提供選自日本優質茶園，茶香濃郁，口感清新，完美搭配各式和菓子。"
                },

                {
                    MealID: 3,
                    MealName: "麻薏蛋糕佐焦糖鳳梨",
                    MealImagePath: "/src/assets/images/dessert/tripInfo_Tw01.png",
                    MealContent: "麻薏蛋糕, 炙烤焦糖鳳梨, 高山茶",
                    MealDescription: "麻薏蛋糕：<br>這款麻薏蛋糕以香濃的麻薏為主料，口感綿密，帶有淡淡的堅果香氣，搭配細緻的奶油霜，讓人一口接一口，回味無窮。<br>炙烤焦糖鳳梨：<br>我們的炙烤焦糖鳳梨採用新鮮的鳳梨，經過炙烤後，散發出誘人的焦香與甜味，外脆內嫩，是完美的甜點搭配。<br>高山茶：<br>選用來自高山的優質茶葉，泡出清新的茶湯，香氣撲鼻，帶有淡淡的甘甜，完美平衡了甜點的濃郁風味，讓你享受每一口的美好時光。"
                },
                {
                    MealID: 4,
                    MealName: "地瓜涼菓佐高山茶糕",
                    MealImagePath: "/src/assets/images/dessert/tripInfo_Tw04.png",
                    MealContent: "地瓜涼菓, 高山茶糕, 凍頂烏龍茶",
                    MealDescription: "地瓜涼菓：<br>這款地瓜涼菓採用新鮮地瓜製作，口感滑順，甜而不膩，搭配天然的椰漿，清爽可口，是夏日消暑的最佳選擇。<br>高山茶糕：<br>高山茶糕融合了優質高山茶的清香，質地柔軟且富有彈性，每一口都散發著茶葉的獨特風味，讓你在甜點中感受到自然的滋味。<br>凍頂烏龍茶：<br>選用凍頂烏龍茶，泡出醇厚的茶湯，帶有淡雅的花香與清新的甘味，與各式甜點相得益彰，讓你在享受美味的同時，感受到茶的悠然魅力。"
                },
                {
                    MealID: 5,
                    MealName: "蒙布朗佐馬卡龍",
                    MealImagePath: "/src/assets/images/dessert/trip_Eur.png",
                    MealContent: "蒙布朗, 馬卡龍, 卡布奇諾",
                    MealDescription: "蒙布朗：<br>這款蒙布朗甜點以細膩的栗子餡為主角，搭配香滑的奶油霜，外層包裹著輕盈的蛋糕，展現出豐富的層次感，每一口都充滿秋天的暖意。<br>馬卡龍：<br>我們的馬卡龍外脆內軟，選用新鮮食材製作，口味多樣，從經典的香草到濃郁的巧克力，無論是哪一種，都帶來絕妙的甜蜜享受。<br>卡布奇諾：<br>這杯卡布奇諾由濃郁的咖啡和綿密的奶泡完美結合，散發著香醇的咖啡香氣，微微的苦味與奶香交融，為甜點時光增添一抹溫暖與愉悅。"
                },
                {
                    MealID: 6,
                    MealName: "草莓塔佐馬卡龍",
                    MealImagePath: "/src/assets/images/dessert/tripInfo_Eur04.png",
                    MealContent: "草莓塔, 馬卡龍, 精品拿鐵",
                    MealDescription: "草莓塔：<br>這款草莓塔以新鮮草莓為主料，搭配細緻的酥皮與香滑的奶油餡，酸甜的滋味讓每一口都充滿春天的清新氣息，是甜點中的經 <br>馬卡龍：<br>我們的馬卡龍色彩繽紛，外脆內軟，口味多樣，從經典的香草、鮮果到濃郁的巧克力，每一口都是甜蜜的驚喜，讓你欲罷不能。<br>精品拿鐵： <br>這杯精品拿鐵由優質咖啡豆精心萃取而成，香濃的咖啡與綿密的奶泡完美結合，微微的甜味與濃郁的香氣，為你的甜點時光增添無限魅力。"
                },
            ];

        function getRoute(routeId) {
            const route = getRouteData.find(item => item.RouteID === routeId);

            if (route) {
                displayRouteInfo(route);
                displayDessertType(routeId); // 同時顯示甜點類型

                let sendStartRoute = document.getElementById('stopStart').innerText;
                let sendEndRoute = document.getElementById('stopEnd').innerText;
                let sendImg = document.getElementById('routeImg').src;

                document.getElementById('goReservation').onclick = function () {
                    toReservation(sendStartRoute, sendEndRoute, sendImg);
                }

            } else {
                console.error("找不到該路線的資料");
            }


        }

        // -------------------------------------------------

        function displayRouteInfo(data) {
            document.getElementById('stopStart').innerText = data.StopStartName;
            document.getElementById('stopEnd').innerText = data.StopEndName;
            document.getElementById('routeImg').src = data.RouteImagePath;
            document.getElementById('description').innerText = data.Description;
            document.getElementById('LandscapeDescription').innerText = data.LandScapeDescription;
            document.getElementById('landscapeimg1').src = data.LandScapeImage1;
            document.getElementById('landscapeimg2').src = data.LandScapeImage2;
            document.getElementById('landscapeimg3').src = data.LandScapeImage3;
        }

        function displayDessertType(routeId) {
            let dessertType;
            // 根據 RouteID 設定甜點類型
            if (routeId === 1 || routeId === 2) {
                dessertType = getDessertType.find(type => type.DessertTypeID === 1); // 日式甜點
            } else if (routeId === 3 || routeId === 4) {
                dessertType = getDessertType.find(type => type.DessertTypeID === 2); // 台式甜點
            } else if (routeId === 5 || routeId === 6) {
                dessertType = getDessertType.find(type => type.DessertTypeID === 3); // 歐式甜點
            } else {
                dessertType = { DessertTitle: "未知甜點類型" };
            }

            // 更新甜點類型顯示
            document.getElementById('dessertType').innerText = dessertType.DessertTitle;
        }

        // 將每個按鈕與相應的 RouteID 連結
        document.querySelectorAll('.itinerary_btn', '#goReservation').forEach(button => {
            button.onclick = () => getRoute(parseInt(button.id));
        });


        // 甜點 ------------------

        // 更新 displayDessertType 函數
        function displayDessertType(routeId) {
            let dessertType;
            let meal1, meal2;

            // 根據 RouteID 設定甜點類型和甜點
            if (routeId === 1 || routeId === 2) {
                dessertType = getDessertType.find(type => type.DessertTypeID === 1); // 日式甜點
                meal1 = getMeals.find(meal => meal.MealID === 1); // 取得第一個甜點
                meal2 = getMeals.find(meal => meal.MealID === 2); // 取得第二個甜點
            } else if (routeId === 3 || routeId === 4) {
                dessertType = getDessertType.find(type => type.DessertTypeID === 2); // 台式甜點
                meal1 = getMeals.find(meal => meal.MealID === 3); // 取得第三個甜點
                meal2 = getMeals.find(meal => meal.MealID === 4); // 取得第四個甜點
            } else if (routeId === 5 || routeId === 6) {
                dessertType = getDessertType.find(type => type.DessertTypeID === 3); // 歐式甜點
                meal1 = getMeals.find(meal => meal.MealID === 5); // 取得第五個甜點
                meal2 = getMeals.find(meal => meal.MealID === 6); // 取得第六個甜點
            } else {
                dessertType = { DessertTitle: "未知甜點類型" };
            }

            // 更新甜點類型顯示
            document.getElementById('dessertType').innerText = dessertType.DessertTitle;

            // 更新甜點資訊顯示
            if (meal1) {
                document.getElementById('mealName1').innerText = meal1.MealName;
                document.getElementById('mealContent1').innerHTML = meal1.MealDescription;
                document.getElementById('mealImg1').src = meal1.MealImagePath;
            }
            if (meal2) {
                document.getElementById('mealName2').innerText = meal2.MealName;
                document.getElementById('mealContent2').innerHTML = meal2.MealDescription;
                document.getElementById('mealImg2').src = meal2.MealImagePath;
            }
        }

        // 傳路線及圖片資料到reservation ---------------------
        // 定義 setMessage 函數，更新 message 元素的內容
        function setMessage(message) {
            const messageElement = document.getElementById('message');
            if (messageElement) { // 確保 message 元素存在
                messageElement.textContent = message;
            } else {
                console.error('未登入');
            }
        }
        function toReservation(startRoute, endRoute, img) {

            axios.get('http://localhost:8000/checkLogIn', {
                withCredentials: true // 如果需要攜帶 session前後端都要加
            })
                .then(response => {
                    console.log('登入成功:', response.data);
                    if (response.data.isLogin) { // 如果 isLogin 為 true
                        // 延遲1秒後跳轉到 reservation.html
                        setTimeout(() => {
                            window.location.href = 'reservation.html';
                        }, 1000); 
                    } else { // 如果 isLogin 為 false
                        setMessage("未登入，跳轉到登入頁面。");

                        // 延遲1秒後跳轉到 /login
                        setTimeout(() => {
                            window.location.href = '/login'; 
                        }, 1000); 
                    }

                })
                .catch(error => {
                    if (error.response) {
                        setMessage(error.response.data.message);

                    } else {
                        setMessage('發生錯誤，請稍後再試。');
                    }
                });


            console.log(startRoute);
            console.log(endRoute);
            console.log(img);

            let routeTypeData = { start: startRoute, end: endRoute, image: img }
            localStorage.setItem("routeType", JSON.stringify(routeTypeData));
            console.log(localStorage.getItem("routeType"));



        }


    </script>
</body>

</html>